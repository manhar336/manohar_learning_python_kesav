import re
from datetime import datetime

time_format = '%Y-%m-%dT%H:%M:%S'
time_format2 = '%Y-%m-%dT%H:%M'

logs = """
<log ns='http://protocols.cisco.com/xcp-metrics#jsm-counters' timestamp='2019-10-18T18:06:26.650853Z' type='none' from='jsm-1.ibt3jsm201a'><element><record interval-sec='60' xmlns='http://protocols.cisco.com/xcp-metrics#jsm-counters'><buffered_stanzas>0</buffered_stanzas><expired-sessions>0</expired-sessions><failed-logins>0</failed-logins><im-sessions>0</im-sessions><im-surr-sessions>0</im-surr-sessions><login-rate>0</login-rate><online-users>0</online-users><push-enable-received-apns>0</push-enable-received-apns><push-enable-received-apnsbeta>0</push-enable-received-apnsbeta><push-enable-received-apnsdev>0</push-enable-received-apnsdev><push-enable-received-apnsload>0</push-enable-received-apnsload><push-enable-received-apnstest>0</push-enable-received-apnstest><push-enable-received-fcm>0</push-enable-received-fcm><push-enable-received-fcmdev>0</push-enable-received-fcmdev><push-enable-received-fcmload>0</push-enable-received-fcmload><push-enable-received-unknown>0</push-enable-received-unknown><push-errors-apns>0</push-errors-apns><push-errors-apnsbeta>0</push-errors-apnsbeta><push-errors-apnsdev>0</push-errors-apnsdev><push-errors-apnsload>0</push-errors-apnsload><push-errors-apnstest>0</push-errors-apnstest><push-errors-fcm>0</push-errors-fcm><push-errors-fcmdev>0</push-errors-fcmdev><push-errors-fcmload>0</push-errors-fcmload><push-errors-unknown>0</push-errors-unknown><push-sent-disconn-apns>0</push-sent-disconn-apns><push-sent-disconn-apnsbeta>0</push-sent-disconn-apnsbeta><push-sent-disconn-apnsdev>0</push-sent-disconn-apnsdev><push-sent-disconn-apnsload>0</push-sent-disconn-apnsload><push-sent-disconn-apnstest>0</push-sent-disconn-apnstest><push-sent-disconn-fcm>0</push-sent-disconn-fcm><push-sent-disconn-fcmdev>0</push-sent-disconn-fcmdev><push-sent-disconn-fcmload>0</push-sent-disconn-fcmload><push-sent-disconn-unknown>0</push-sent-disconn-unknown><push-sent-silent-apns>0</push-sent-silent-apns><push-sent-silent-apnsbeta>0</push-sent-silent-apnsbeta><push-sent-silent-apnsdev>0</push-sent-silent-apnsdev><push-sent-silent-apnsload>0</push-sent-silent-apnsload><push-sent-silent-apnstest>0</push-sent-silent-apnstest><push-sent-silent-fcm>0</push-sent-silent-fcm><push-sent-silent-fcmdev>0</push-sent-silent-fcmdev><push-sent-silent-fcmload>0</push-sent-silent-fcmload><push-sent-silent-unknown>0</push-sent-silent-unknown><push-sessions-apns>0</push-sessions-apns><push-sessions-apnsbeta>0</push-sessions-apnsbeta><push-sessions-apnsdev>0</push-sessions-apnsdev><push-sessions-apnsload>0</push-sessions-apnsload><push-sessions-apnstest>0</push-sessions-apnstest><push-sessions-fcm>0</push-sessions-fcm><push-sessions-fcmdev>0</push-sessions-fcmdev><push-sessions-fcmload>0</push-sessions-fcmload><push-sessions-unknown>0</push-sessions-unknown><r_conn>0</r_conn><r_dis>0</r_dis><r_open>0</r_open><rc_del>0</rc_del><rc_expire>0</rc_expire><rc_get>0</rc_get><rc_hexists>0</rc_hexists><rc_hgetall>0</rc_hgetall><rc_hlen>0</rc_hlen><rc_hset>0</rc_hset><rc_hvals>0</rc_hvals><rc_llen>0</rc_llen><rc_lpop>0</rc_lpop><rc_lrange>0</rc_lrange><rc_rpush>0</rc_rpush><rc_set>0</rc_set><rc_total>0</rc_total><rl_avg>0</rl_avg><rl_curr>0</rl_curr><rl_sum>0</rl_sum><rr_array>0</rr_array><rr_e_moved>0</rr_e_moved><rr_err>0</rr_err><rr_int>0</rr_int><rr_nil>0</rr_nil><rr_null>0</rr_null><rr_str>0</rr_str><successful-logins>0</successful-logins><suspended-sessions>0</suspended-sessions><swdb_count>0</swdb_count><swdb_created>3</swdb_created><swdb_destroyed>3</swdb_destroyed><uptime>2019-10-15T05:02:08Z</uptime><xdb_count>0</xdb_count><xdb_created>0</xdb_created><xdb_resolved>0</xdb_resolved></record></element></log>
<log ns='http://protocols.cisco.com/xcp-metrics#jsm-counters' timestamp='2019-10-18T18:06:27.650853Z' type='none' from='jsm-1.ibt3jsm201a'><element><record interval-sec='60' xmlns='http://protocols.cisco.com/xcp-metrics#jsm-counters'><buffered_stanzas>0</buffered_stanzas><expired-sessions>0</expired-sessions><failed-logins>0</failed-logins><im-sessions>0</im-sessions><im-surr-sessions>0</im-surr-sessions><login-rate>0</login-rate><online-users>0</online-users><push-enable-received-apns>0</push-enable-received-apns><push-enable-received-apnsbeta>0</push-enable-received-apnsbeta><push-enable-received-apnsdev>0</push-enable-received-apnsdev><push-enable-received-apnsload>0</push-enable-received-apnsload><push-enable-received-apnstest>0</push-enable-received-apnstest><push-enable-received-fcm>0</push-enable-received-fcm><push-enable-received-fcmdev>0</push-enable-received-fcmdev><push-enable-received-fcmload>0</push-enable-received-fcmload><push-enable-received-unknown>0</push-enable-received-unknown><push-errors-apns>0</push-errors-apns><push-errors-apnsbeta>0</push-errors-apnsbeta><push-errors-apnsdev>0</push-errors-apnsdev><push-errors-apnsload>0</push-errors-apnsload><push-errors-apnstest>0</push-errors-apnstest><push-errors-fcm>0</push-errors-fcm><push-errors-fcmdev>0</push-errors-fcmdev><push-errors-fcmload>0</push-errors-fcmload><push-errors-unknown>0</push-errors-unknown><push-sent-disconn-apns>0</push-sent-disconn-apns><push-sent-disconn-apnsbeta>0</push-sent-disconn-apnsbeta><push-sent-disconn-apnsdev>0</push-sent-disconn-apnsdev><push-sent-disconn-apnsload>0</push-sent-disconn-apnsload><push-sent-disconn-apnstest>0</push-sent-disconn-apnstest><push-sent-disconn-fcm>0</push-sent-disconn-fcm><push-sent-disconn-fcmdev>0</push-sent-disconn-fcmdev><push-sent-disconn-fcmload>0</push-sent-disconn-fcmload><push-sent-disconn-unknown>0</push-sent-disconn-unknown><push-sent-silent-apns>0</push-sent-silent-apns><push-sent-silent-apnsbeta>0</push-sent-silent-apnsbeta><push-sent-silent-apnsdev>0</push-sent-silent-apnsdev><push-sent-silent-apnsload>0</push-sent-silent-apnsload><push-sent-silent-apnstest>0</push-sent-silent-apnstest><push-sent-silent-fcm>0</push-sent-silent-fcm><push-sent-silent-fcmdev>0</push-sent-silent-fcmdev><push-sent-silent-fcmload>0</push-sent-silent-fcmload><push-sent-silent-unknown>0</push-sent-silent-unknown><push-sessions-apns>0</push-sessions-apns><push-sessions-apnsbeta>0</push-sessions-apnsbeta><push-sessions-apnsdev>0</push-sessions-apnsdev><push-sessions-apnsload>0</push-sessions-apnsload><push-sessions-apnstest>0</push-sessions-apnstest><push-sessions-fcm>0</push-sessions-fcm><push-sessions-fcmdev>0</push-sessions-fcmdev><push-sessions-fcmload>0</push-sessions-fcmload><push-sessions-unknown>0</push-sessions-unknown><r_conn>0</r_conn><r_dis>0</r_dis><r_open>0</r_open><rc_del>0</rc_del><rc_expire>0</rc_expire><rc_get>0</rc_get><rc_hexists>0</rc_hexists><rc_hgetall>0</rc_hgetall><rc_hlen>0</rc_hlen><rc_hset>0</rc_hset><rc_hvals>0</rc_hvals><rc_llen>0</rc_llen><rc_lpop>0</rc_lpop><rc_lrange>0</rc_lrange><rc_rpush>0</rc_rpush><rc_set>0</rc_set><rc_total>0</rc_total><rl_avg>0</rl_avg><rl_curr>0</rl_curr><rl_sum>0</rl_sum><rr_array>0</rr_array><rr_e_moved>0</rr_e_moved><rr_err>0</rr_err><rr_int>0</rr_int><rr_nil>0</rr_nil><rr_null>0</rr_null><rr_str>0</rr_str><successful-logins>0</successful-logins><suspended-sessions>0</suspended-sessions><swdb_count>0</swdb_count><swdb_created>3</swdb_created><swdb_destroyed>3</swdb_destroyed><uptime>2019-10-15T05:02:08Z</uptime><xdb_count>0</xdb_count><xdb_created>0</xdb_created><xdb_resolved>0</xdb_resolved></record></element></log>
<log ns='http://protocols.cisco.com/xcp-metrics#jsm-counters' timestamp='2019-10-18T18:06:28.650853Z' type='none' from='jsm-1.ibt3jsm201a'><element><record interval-sec='60' xmlns='http://protocols.cisco.com/xcp-metrics#jsm-counters'><buffered_stanzas>0</buffered_stanzas><expired-sessions>0</expired-sessions><failed-logins>0</failed-logins><im-sessions>0</im-sessions><im-surr-sessions>0</im-surr-sessions><login-rate>0</login-rate><online-users>0</online-users><push-enable-received-apns>0</push-enable-received-apns><push-enable-received-apnsbeta>0</push-enable-received-apnsbeta><push-enable-received-apnsdev>0</push-enable-received-apnsdev><push-enable-received-apnsload>0</push-enable-received-apnsload><push-enable-received-apnstest>0</push-enable-received-apnstest><push-enable-received-fcm>0</push-enable-received-fcm><push-enable-received-fcmdev>0</push-enable-received-fcmdev><push-enable-received-fcmload>0</push-enable-received-fcmload><push-enable-received-unknown>0</push-enable-received-unknown><push-errors-apns>0</push-errors-apns><push-errors-apnsbeta>0</push-errors-apnsbeta><push-errors-apnsdev>0</push-errors-apnsdev><push-errors-apnsload>0</push-errors-apnsload><push-errors-apnstest>0</push-errors-apnstest><push-errors-fcm>0</push-errors-fcm><push-errors-fcmdev>0</push-errors-fcmdev><push-errors-fcmload>0</push-errors-fcmload><push-errors-unknown>0</push-errors-unknown><push-sent-disconn-apns>0</push-sent-disconn-apns><push-sent-disconn-apnsbeta>0</push-sent-disconn-apnsbeta><push-sent-disconn-apnsdev>0</push-sent-disconn-apnsdev><push-sent-disconn-apnsload>0</push-sent-disconn-apnsload><push-sent-disconn-apnstest>0</push-sent-disconn-apnstest><push-sent-disconn-fcm>0</push-sent-disconn-fcm><push-sent-disconn-fcmdev>0</push-sent-disconn-fcmdev><push-sent-disconn-fcmload>0</push-sent-disconn-fcmload><push-sent-disconn-unknown>0</push-sent-disconn-unknown><push-sent-silent-apns>0</push-sent-silent-apns><push-sent-silent-apnsbeta>0</push-sent-silent-apnsbeta><push-sent-silent-apnsdev>0</push-sent-silent-apnsdev><push-sent-silent-apnsload>0</push-sent-silent-apnsload><push-sent-silent-apnstest>0</push-sent-silent-apnstest><push-sent-silent-fcm>0</push-sent-silent-fcm><push-sent-silent-fcmdev>0</push-sent-silent-fcmdev><push-sent-silent-fcmload>0</push-sent-silent-fcmload><push-sent-silent-unknown>0</push-sent-silent-unknown><push-sessions-apns>0</push-sessions-apns><push-sessions-apnsbeta>0</push-sessions-apnsbeta><push-sessions-apnsdev>0</push-sessions-apnsdev><push-sessions-apnsload>0</push-sessions-apnsload><push-sessions-apnstest>0</push-sessions-apnstest><push-sessions-fcm>0</push-sessions-fcm><push-sessions-fcmdev>0</push-sessions-fcmdev><push-sessions-fcmload>0</push-sessions-fcmload><push-sessions-unknown>0</push-sessions-unknown><r_conn>0</r_conn><r_dis>0</r_dis><r_open>0</r_open><rc_del>0</rc_del><rc_expire>0</rc_expire><rc_get>0</rc_get><rc_hexists>0</rc_hexists><rc_hgetall>0</rc_hgetall><rc_hlen>0</rc_hlen><rc_hset>0</rc_hset><rc_hvals>0</rc_hvals><rc_llen>0</rc_llen><rc_lpop>0</rc_lpop><rc_lrange>0</rc_lrange><rc_rpush>0</rc_rpush><rc_set>0</rc_set><rc_total>0</rc_total><rl_avg>0</rl_avg><rl_curr>0</rl_curr><rl_sum>0</rl_sum><rr_array>0</rr_array><rr_e_moved>0</rr_e_moved><rr_err>0</rr_err><rr_int>0</rr_int><rr_nil>0</rr_nil><rr_null>0</rr_null><rr_str>0</rr_str><successful-logins>0</successful-logins><suspended-sessions>0</suspended-sessions><swdb_count>0</swdb_count><swdb_created>3</swdb_created><swdb_destroyed>3</swdb_destroyed><uptime>2019-10-15T05:02:08Z</uptime><xdb_count>0</xdb_count><xdb_created>0</xdb_created><xdb_resolved>0</xdb_resolved></record></element></log>
<log ns='http://protocols.cisco.com/xcp-metrics#jsm-counters' timestamp='2019-10-18T18:06:29.650853Z' type='none' from='jsm-1.ibt3jsm201a'><element><record interval-sec='60' xmlns='http://protocols.cisco.com/xcp-metrics#jsm-counters'><buffered_stanzas>0</buffered_stanzas><expired-sessions>0</expired-sessions><failed-logins>0</failed-logins><im-sessions>0</im-sessions><im-surr-sessions>0</im-surr-sessions><login-rate>0</login-rate><online-users>0</online-users><push-enable-received-apns>0</push-enable-received-apns><push-enable-received-apnsbeta>0</push-enable-received-apnsbeta><push-enable-received-apnsdev>0</push-enable-received-apnsdev><push-enable-received-apnsload>0</push-enable-received-apnsload><push-enable-received-apnstest>0</push-enable-received-apnstest><push-enable-received-fcm>0</push-enable-received-fcm><push-enable-received-fcmdev>0</push-enable-received-fcmdev><push-enable-received-fcmload>0</push-enable-received-fcmload><push-enable-received-unknown>0</push-enable-received-unknown><push-errors-apns>0</push-errors-apns><push-errors-apnsbeta>0</push-errors-apnsbeta><push-errors-apnsdev>0</push-errors-apnsdev><push-errors-apnsload>0</push-errors-apnsload><push-errors-apnstest>0</push-errors-apnstest><push-errors-fcm>0</push-errors-fcm><push-errors-fcmdev>0</push-errors-fcmdev><push-errors-fcmload>0</push-errors-fcmload><push-errors-unknown>0</push-errors-unknown><push-sent-disconn-apns>0</push-sent-disconn-apns><push-sent-disconn-apnsbeta>0</push-sent-disconn-apnsbeta><push-sent-disconn-apnsdev>0</push-sent-disconn-apnsdev><push-sent-disconn-apnsload>0</push-sent-disconn-apnsload><push-sent-disconn-apnstest>0</push-sent-disconn-apnstest><push-sent-disconn-fcm>0</push-sent-disconn-fcm><push-sent-disconn-fcmdev>0</push-sent-disconn-fcmdev><push-sent-disconn-fcmload>0</push-sent-disconn-fcmload><push-sent-disconn-unknown>0</push-sent-disconn-unknown><push-sent-silent-apns>0</push-sent-silent-apns><push-sent-silent-apnsbeta>0</push-sent-silent-apnsbeta><push-sent-silent-apnsdev>0</push-sent-silent-apnsdev><push-sent-silent-apnsload>0</push-sent-silent-apnsload><push-sent-silent-apnstest>0</push-sent-silent-apnstest><push-sent-silent-fcm>0</push-sent-silent-fcm><push-sent-silent-fcmdev>0</push-sent-silent-fcmdev><push-sent-silent-fcmload>0</push-sent-silent-fcmload><push-sent-silent-unknown>0</push-sent-silent-unknown><push-sessions-apns>0</push-sessions-apns><push-sessions-apnsbeta>0</push-sessions-apnsbeta><push-sessions-apnsdev>0</push-sessions-apnsdev><push-sessions-apnsload>0</push-sessions-apnsload><push-sessions-apnstest>0</push-sessions-apnstest><push-sessions-fcm>0</push-sessions-fcm><push-sessions-fcmdev>0</push-sessions-fcmdev><push-sessions-fcmload>0</push-sessions-fcmload><push-sessions-unknown>0</push-sessions-unknown><r_conn>0</r_conn><r_dis>0</r_dis><r_open>0</r_open><rc_del>0</rc_del><rc_expire>0</rc_expire><rc_get>0</rc_get><rc_hexists>0</rc_hexists><rc_hgetall>0</rc_hgetall><rc_hlen>0</rc_hlen><rc_hset>0</rc_hset><rc_hvals>0</rc_hvals><rc_llen>0</rc_llen><rc_lpop>0</rc_lpop><rc_lrange>0</rc_lrange><rc_rpush>0</rc_rpush><rc_set>0</rc_set><rc_total>0</rc_total><rl_avg>0</rl_avg><rl_curr>0</rl_curr><rl_sum>0</rl_sum><rr_array>0</rr_array><rr_e_moved>0</rr_e_moved><rr_err>0</rr_err><rr_int>0</rr_int><rr_nil>0</rr_nil><rr_null>0</rr_null><rr_str>0</rr_str><successful-logins>0</successful-logins><suspended-sessions>0</suspended-sessions><swdb_count>0</swdb_count><swdb_created>3</swdb_created><swdb_destroyed>3</swdb_destroyed><uptime>2019-10-15T05:02:08Z</uptime><xdb_count>0</xdb_count><xdb_created>0</xdb_created><xdb_resolved>0</xdb_resolved></record></element></log>
<log ns='http://protocols.cisco.com/xcp-metrics#jsm-counters' timestamp='2019-10-18T18:06:20.650853Z' type='none' from='jsm-1.ibt3jsm201a'><element><record interval-sec='60' xmlns='http://protocols.cisco.com/xcp-metrics#jsm-counters'><buffered_stanzas>0</buffered_stanzas><expired-sessions>0</expired-sessions><failed-logins>0</failed-logins><im-sessions>0</im-sessions><im-surr-sessions>0</im-surr-sessions><login-rate>0</login-rate><online-users>0</online-users><push-enable-received-apns>0</push-enable-received-apns><push-enable-received-apnsbeta>0</push-enable-received-apnsbeta><push-enable-received-apnsdev>0</push-enable-received-apnsdev><push-enable-received-apnsload>0</push-enable-received-apnsload><push-enable-received-apnstest>0</push-enable-received-apnstest><push-enable-received-fcm>0</push-enable-received-fcm><push-enable-received-fcmdev>0</push-enable-received-fcmdev><push-enable-received-fcmload>0</push-enable-received-fcmload><push-enable-received-unknown>0</push-enable-received-unknown><push-errors-apns>0</push-errors-apns><push-errors-apnsbeta>0</push-errors-apnsbeta><push-errors-apnsdev>0</push-errors-apnsdev><push-errors-apnsload>0</push-errors-apnsload><push-errors-apnstest>0</push-errors-apnstest><push-errors-fcm>0</push-errors-fcm><push-errors-fcmdev>0</push-errors-fcmdev><push-errors-fcmload>0</push-errors-fcmload><push-errors-unknown>0</push-errors-unknown><push-sent-disconn-apns>0</push-sent-disconn-apns><push-sent-disconn-apnsbeta>0</push-sent-disconn-apnsbeta><push-sent-disconn-apnsdev>0</push-sent-disconn-apnsdev><push-sent-disconn-apnsload>0</push-sent-disconn-apnsload><push-sent-disconn-apnstest>0</push-sent-disconn-apnstest><push-sent-disconn-fcm>0</push-sent-disconn-fcm><push-sent-disconn-fcmdev>0</push-sent-disconn-fcmdev><push-sent-disconn-fcmload>0</push-sent-disconn-fcmload><push-sent-disconn-unknown>0</push-sent-disconn-unknown><push-sent-silent-apns>0</push-sent-silent-apns><push-sent-silent-apnsbeta>0</push-sent-silent-apnsbeta><push-sent-silent-apnsdev>0</push-sent-silent-apnsdev><push-sent-silent-apnsload>0</push-sent-silent-apnsload><push-sent-silent-apnstest>0</push-sent-silent-apnstest><push-sent-silent-fcm>0</push-sent-silent-fcm><push-sent-silent-fcmdev>0</push-sent-silent-fcmdev><push-sent-silent-fcmload>0</push-sent-silent-fcmload><push-sent-silent-unknown>0</push-sent-silent-unknown><push-sessions-apns>0</push-sessions-apns><push-sessions-apnsbeta>0</push-sessions-apnsbeta><push-sessions-apnsdev>0</push-sessions-apnsdev><push-sessions-apnsload>0</push-sessions-apnsload><push-sessions-apnstest>0</push-sessions-apnstest><push-sessions-fcm>0</push-sessions-fcm><push-sessions-fcmdev>0</push-sessions-fcmdev><push-sessions-fcmload>0</push-sessions-fcmload><push-sessions-unknown>0</push-sessions-unknown><r_conn>0</r_conn><r_dis>0</r_dis><r_open>0</r_open><rc_del>0</rc_del><rc_expire>0</rc_expire><rc_get>0</rc_get><rc_hexists>0</rc_hexists><rc_hgetall>0</rc_hgetall><rc_hlen>0</rc_hlen><rc_hset>0</rc_hset><rc_hvals>0</rc_hvals><rc_llen>0</rc_llen><rc_lpop>0</rc_lpop><rc_lrange>0</rc_lrange><rc_rpush>0</rc_rpush><rc_set>0</rc_set><rc_total>0</rc_total><rl_avg>0</rl_avg><rl_curr>0</rl_curr><rl_sum>0</rl_sum><rr_array>0</rr_array><rr_e_moved>0</rr_e_moved><rr_err>0</rr_err><rr_int>0</rr_int><rr_nil>0</rr_nil><rr_null>0</rr_null><rr_str>0</rr_str><successful-logins>0</successful-logins><suspended-sessions>0</suspended-sessions><swdb_count>0</swdb_count><swdb_created>3</swdb_created><swdb_destroyed>3</swdb_destroyed><uptime>2019-10-15T05:02:08Z</uptime><xdb_count>0</xdb_count><xdb_created>0</xdb_created><xdb_resolved>0</xdb_resolved></record></element></log>
"""
#print(logs)

onlineuser = re.findall("<online.*>(\d)</online.*>",logs)
timestamp = re.findall("'(\d{4}-\d{2}-\d{2}T\d*:\d*:\d*)",logs)
t2 = [datetime.strptime(i, time_format) for i in timestamp]
#print("online users:",onlineusers)
#print("timestamp=",timestamp)
op2 = dict(zip(t2,onlineuser))

for onlineusers,timestamps in op2.items():
    print("Timestamp:%s and Online users: %s"%(onlineusers,timestamps))

#take user query

start_time = str(input("Enter Start Time : "))
#print(".........")
End_time = str(input("Enter End Time : "))

#start_time = '2019-10-19T19:52:35.818796Z'
#End_time  = "2019-10-19T20:52:35.818796Z"

out = {key : value for key,value in op2.items() if key  >= datetime.strptime(start_time, time_format2) and key <= datetime.strptime(End_time, time_format2)}
for i , v in out.items() :
    print("Time:",i.strftime(time_format2),"Online Users:",v)